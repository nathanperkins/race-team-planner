# Dockerfile for database tools (backup, restore, migrate)
FROM google/cloud-sdk:slim

# Install PostgreSQL client and gnupg
RUN apt-get update && apt-get install -y postgresql-client gnupg && rm -rf /var/lib/apt/lists/*

# Copy all database scripts
COPY scripts/backup-db.sh /scripts/backup.sh
COPY scripts/restore-db.sh /scripts/restore.sh
RUN chmod +x /scripts/*.sh

# Default to backup (override with CMD when running)
CMD ["/scripts/backup.sh"]
